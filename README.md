# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание Архитектуры проекта

Используется архитектура MVP в которой будет 3 основных части:
Model(содержит данные и бизнес логику), View(отображение и передачу действий пользователя презентеру), Presenter(связывают Model и View)

### Model

- ProductModel(управляет данными о товарах) - id, category, title, image, price, description + Методы: получение списка товаров с сервера
- BasketModel(управляет корзиной) - массив товаров, общая сумма, количество товаров + Методы: добавление товара, удаление товара, расчет общей суммы
- OrderModel(управляет данными заказа) способ оплаты, адрес, email, телефон, товары, общая сумма + Методы: создание заказа, валидация полей, отправка заказа на сервер

### View

- CatalogView(отображает список товаров) - Отображает: список карточек товаров. События: запрос на загрузку товаров
- ProductCardView(отображает карточку товара) - Отображает: название, фото, цену, категорию. События: клик по карточке (выбор товара)
- ModalView(базовый компонент модального окна) - Отображает: общую структуру модального окна. События: закрытие по крестику, закрытие по оверлею
- ProductModalView(отображает детали товара) - Отображает: название, фото, описание, цену, кнопку "Купить"/"В корзину".События: запрос на добавление в корзину, запрос на переход в корзину
- BasketModalView(отображает корзину) - Отображает: список товаров, общую сумму, кнопку "Оформить". События: запрос на удаление товара, запрос на оформление заказа
- OrderAddressModalView, OrderContactModalView(формы заказа) - Отображают: поля для ввода данных, кнопку "Далее". События: изменение полей формы, запрос на переход к следующему шагу
- SuccessModalView(страница успешного заказа) - Отображает: сообщение, общую сумму, кнопку. События: запрос на возврат в каталог

### Presenter

- CatalogPresenter. Связывает CatalogView и ProductModel. Загрузка товаров, обновление отображения каталога
- ProductPresenter. Связывает ProductModalView, ProductModel и BasketModel. Показ деталей товара, добавление в корзину
- BasketPresenter. Связывает BasketModalView с BasketModel. Отображение корзины, удаление товаров, переход к оформлению
- OrderPresenter. Связывает формы заказа с OrderModel. Валидация полей, сохранение данных заказа, переход между шагами
- AppPresenter. Главный координатор приложения. Открытие/закрытие модальных окон, навигация между страницами

## Описание базовых классов, их предназначение и функции.

Класс API:
Нужен для общения с сервером. То есть чтобы мы понимали как делать запросы.

- Метод handleResponse обрабатывает ответы с сервера. Выкидвает ошибку, если произошел сбой на сервере и в случае успеха преобразует ответ в JSON.
- Метод get отправляет запрос для получение данных.
- Метода post отправляет данные на сервер(сформированный заказ)

Класс EventEmitter:
Реализует систему событий(Наблюдатель), позволяющую компонентам взаимодействовать друг с другом без прямых зависимостей.

- Метод on подписывает функцию-обработчик на определённое событие.
- Метод off отписывает обработчик от события.
- Метод emit инициирует событие и вызывает все подписанные на него обработчики.
- Метод onAll подписывает обработчик на все события.
- Метод offAll удаляет все обработчики событий.
- Метод trigger создаёт функцию, которая при вызове инициирует указанное событие.

## Описание компонентов, их функций и связей с другими компонентами.

- Catalog - Отображает сетку товаров на главной странице магазина. Получение и отображение списка товаров. Связи: использует компонент ProductCard для отображения каждого товара, получает данные через CatalogPresenter.
- ProductCard - Отображает карточку отдельного товара в каталоге. Показывает основную информацию о товаре (название, изображение, цена, категория). Связи: при клике открывает ProductModal через компонент Modal.
- Modal - Базовый компонент для всех модальных окон. Отображает содержимое поверх основной страницы, обеспечивает закрытие по крестику или оверлею. Связи: используется компонентами ProductModal, BasketModal, OrderAddressModal, OrderContactModal, SuccessModal.
- ProductModal - Отображает детальную информацию о товаре в модальном окне. Показывает подробную информацию о товаре, предоставляет возможность добавить товар в корзину. Связи: использует компонент Button, взаимодействует с BasketModal через систему событий.
- BasketModal - Отображает содержимое корзины покупок. Показывает выбранные товары, их стоимость, предоставляет возможность удаления и оформления заказа. Связи: содержит компоненты BasketItem, использует Button для оформления, открывает OrderAddressModal.
- BasketItem - Отображает отдельный товар в корзине. Показывает информацию о товаре в корзине, позволяет удалить товар. Связи: использует Button для удаления, обновляет данные в BasketModal.
- OrderAddressModal - Форма ввода адреса доставки и способа оплаты. Собирает данные для доставки, валидирует поля. Связи: использует Button, открывает OrderContactModal при продолжении.
- OrderContactModal - Форма ввода контактных данных покупателя. Собирает контактные данные, валидирует поля. Связи: использует Button, открывает SuccessModal при успешном оформлении.
- SuccessModal - Подтверждение успешного оформления заказа. Отображает информацию о завершенном заказе и списанной сумме. Связи: использует Button для возврата в каталог.
- Button - Универсальный компонент кнопки с различными состояниями. Обрабатывает нажатия, изменяет состояния (активна/неактивна). Связи: используется всеми компонентами, требующими интерактивных действий.
